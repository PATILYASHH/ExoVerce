<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Repositories - ExoVerce</title>
    <meta name="description" content="ExoVerce Repositories - Manage your electronics projects and collaborative workspaces">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" as="style">
    <link rel="preload" href="../css/global.css" as="style">
    
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="repository.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container-fluid px-4">
            <a class="navbar-brand d-flex align-items-center" href="../index.html">
                <i class="fa-solid fa-lightbulb me-2"></i>ExoVerce
            </a>

            <div class="ms-auto d-flex align-items-center text-white">
                <div class="status-indicators d-none d-lg-flex">
                    <div class="status-indicator">
                        <i class="fa-solid fa-database"></i> Storage: <span class="stat-value">60%</span>
                    </div>
                    <div class="status-indicator">
                        <i class="fa-solid fa-clock"></i> Work Hr: <span class="stat-value">80%</span>
                    </div>
                </div>
                
                <button class="navbar-toggler ms-3" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>

            <div class="collapse navbar-collapse justify-content-end" id="navbarNav"> 
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="../repository/repository.html" class="nav-link active"><i class="fa-solid fa-vial-virus"></i> Repositories</a>
                    </li>
                    <li class="nav-item">
                        <a href="../achivements/achievements.html" class="nav-link"><i class="fa-solid fa-trophy"></i> Achievements</a>
                    </li>
                    <li class="nav-item">
                        <a href="../pages/updates/update.html" class="nav-link"><i class="fa-regular fa-newspaper"></i> ExoSocial</a>
                    </li>
                    <li class="nav-item">
                        <a href="../pages/tutorials/tutorial.html" class="nav-link"><i class="fa-solid fa-film"></i> ExoTutor</a>
                    </li>
                    <li class="nav-item">
                        <a href="../pages/store/store.html" class="nav-link"><i class="fa-solid fa-bag-shopping"></i> Store</a>
                    </li>
                    <li class="nav-item">
                        <a href="../chat/chat.html" class="nav-link"><i class="fa-solid fa-comments"></i> Chat</a>
                    </li>
                    <li class="nav-item">
                        <a href="../profile/profile.html" class="nav-link"><i class="fa-solid fa-user"></i> Profile</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">Project Repositories</h1>
            <p class="hero-subtitle">Manage your electronics projects, code repositories, and collaborative workspaces</p>
            <div class="hero-actions">
                <button class="btn btn-primary" onclick="openCreateRepoModal()">
                    <i class="fa-solid fa-plus"></i> Create New Repository
                </button>
                <button class="btn btn-secondary" onclick="importRepository()">
                    <i class="fa-solid fa-download"></i> Import Repository
                </button>
            </div>
        </div>
    </section>

    <!-- Repository Stats -->
    <section class="stats-section">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fa-solid fa-folder"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="totalRepos">0</div>
                        <div class="stat-label">Total Repositories</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fa-solid fa-code"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="totalCommits">0</div>
                        <div class="stat-label">Total Commits</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fa-solid fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="totalCollaborators">0</div>
                        <div class="stat-label">Collaborators</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fa-solid fa-star"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="totalStars">0</div>
                        <div class="stat-label">Stars Received</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Repository Filters -->
    <section class="filter-section">
        <div class="container">
            <div class="filter-controls">
                <div class="search-box">
                    <i class="fa-solid fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search repositories...">
                </div>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="public">Public</button>
                    <button class="filter-btn" data-filter="private">Private</button>
                    <button class="filter-btn" data-filter="arduino">Arduino</button>
                    <button class="filter-btn" data-filter="pcb">PCB Design</button>
                    <button class="filter-btn" data-filter="iot">IoT</button>
                    <button class="filter-btn" data-filter="robotics">Robotics</button>
                </div>
                <div class="sort-controls">
                    <select id="sortSelect">
                        <option value="updated">Recently Updated</option>
                        <option value="created">Recently Created</option>
                        <option value="name">Name</option>
                        <option value="stars">Stars</option>
                    </select>
                </div>
            </div>
        </div>
    </section>

    <!-- Repository Grid -->
    <section class="repositories-section">
        <div class="container">
            <div class="repositories-grid" id="repositoriesGrid">
                <!-- Repository cards will be dynamically generated -->
            </div>
        </div>
    </section>

    <!-- Create Repository Modal -->
    <div class="modal fade" id="createRepoModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Repository</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="createRepoForm">
                        <div class="mb-3">
                            <label for="repoName" class="form-label">Repository Name</label>
                            <input type="text" class="form-control" id="repoName" required>
                        </div>
                        <div class="mb-3">
                            <label for="repoDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="repoDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="repoType" class="form-label">Project Type</label>
                            <select class="form-select" id="repoType">
                                <option value="arduino">Arduino Project</option>
                                <option value="pcb">PCB Design</option>
                                <option value="iot">IoT Project</option>
                                <option value="robotics">Robotics</option>
                                <option value="sensors">Sensor Project</option>
                                <option value="automation">Home Automation</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="repoVisibility" class="form-label">Visibility</label>
                            <select class="form-select" id="repoVisibility">
                                <option value="public">Public</option>
                                <option value="private">Private</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="addReadme">
                                <label class="form-check-label" for="addReadme">
                                    Add README file
                                </label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="addLicense">
                                <label class="form-check-label" for="addLicense">
                                    Add MIT License
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="createRepository()">Create Repository</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Repository Detail Modal -->
    <div class="modal fade" id="repoDetailModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="repoDetailTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="repo-detail-content">
                        <div class="repo-info">
                            <div class="fork-relationship" id="forkRelationship" style="display: none;">
                                <p>
                                    <i class="fa-solid fa-code-fork"></i> 
                                    Forked from <a href="#" class="original-repo" id="originalRepoLink"></a>
                                </p>
                            </div>
                            <p id="repoDetailDescription"></p>
                            <div class="repo-stats">
                                <span class="stat-item">
                                    <i class="fa-solid fa-star"></i> <span id="repoStars">0</span> Stars
                                </span>
                                <span class="stat-item">
                                    <i class="fa-solid fa-code-fork"></i> <span id="repoForks">0</span> Forks
                                </span>
                                <span class="stat-item">
                                    <i class="fa-solid fa-eye"></i> <span id="repoWatchers">0</span> Watchers
                                </span>
                                <span class="stat-item">
                                    <i class="fa-solid fa-code-commit"></i> <span id="repoCommits">0</span> Commits
                                </span>
                                <span class="stat-item">
                                    <i class="fa-solid fa-users"></i> <span id="repoCollaborators">0</span> Collaborators
                                </span>
                            </div>
                            <div class="repo-tags" id="repoDetailTags">
                                <!-- Tags will be populated here -->
                            </div>
                        </div>
                        <div class="repo-actions">
                            <button class="btn btn-primary" onclick="viewCode(1)">
                                <i class="fa-solid fa-code"></i> View Code
                            </button>
                            <button class="btn btn-success" onclick="cloneRepo(1)">
                                <i class="fa-solid fa-download"></i> Clone
                            </button>
                            <button class="btn btn-warning" onclick="forkRepository(1)">
                                <i class="fa-solid fa-code-fork"></i> Fork
                            </button>
                            <button class="btn btn-info" onclick="starRepository(1)">
                                <i class="fa-solid fa-star"></i> Star
                            </button>
                            <button class="btn btn-secondary" onclick="watchRepository(1)">
                                <i class="fa-solid fa-eye"></i> Watch
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Fork Repository Modal -->
    <div class="modal fade" id="forkRepoModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Fork Repository</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="fork-info">
                        <div class="original-repo-info">
                            <h6>Original Repository</h6>
                            <div class="repo-preview">
                                <div class="repo-icon">
                                    <i class="fa-solid fa-folder"></i>
                                </div>
                                <div class="repo-details">
                                    <h5 id="originalRepoName"></h5>
                                    <p id="originalRepoDescription"></p>
                                    <div class="repo-stats-mini">
                                        <span><i class="fa-solid fa-star"></i> <span id="originalRepoStars">0</span></span>
                                        <span><i class="fa-solid fa-code-fork"></i> <span id="originalRepoForks">0</span></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="fork-arrow">
                            <i class="fa-solid fa-arrow-down"></i>
                        </div>
                        
                        <div class="fork-options">
                            <h6>Fork Options</h6>
                            <form id="forkForm">
                                <div class="mb-3">
                                    <label for="forkName" class="form-label">Repository Name</label>
                                    <input type="text" class="form-control" id="forkName" required>
                                    <div class="form-text">The name of your forked repository</div>
                                </div>
                                <div class="mb-3">
                                    <label for="forkDescription" class="form-label">Description (Optional)</label>
                                    <textarea class="form-control" id="forkDescription" rows="3"></textarea>
                                </div>
                                <div class="mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="forkPrivate">
                                        <label class="form-check-label" for="forkPrivate">
                                            Make this fork private
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="forkWatch" checked>
                                        <label class="form-check-label" for="forkWatch">
                                            Watch the original repository for updates
                                        </label>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="confirmFork()">
                        <i class="fa-solid fa-code-fork"></i> Create Fork
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="repository.js"></script>
</body>
</html>
