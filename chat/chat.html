<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExoChat - ExoVerce Communication Hub</title>
    <meta name="description" content="ExoChat - Collaborate and communicate with the ExoVerce learning community">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" as="style">
    <link rel="preload" href="../css/style.css" as="style">
    
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="assets/css/style.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../logo.png">
</head>
<body class="exochat-body">
    <!-- Main ExoChat Container -->
    <div class="exochat-container">
        <!-- Left Sidebar -->
        <div class="exochat-sidebar">
            <!-- Header with logo and user -->
            <div class="sidebar-header">
                <div class="brand-section">
                    <img src="../logo.png" alt="ExoVerce" class="brand-logo">
                    <h3 class="brand-name">ExoChat</h3>
                </div>
                <div class="user-controls">
                    <button class="control-btn" data-bs-toggle="tooltip" title="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button class="control-btn" data-bs-toggle="tooltip" title="Create Room">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <!-- User Profile Section -->
            <div class="user-profile-section">
                <div class="current-user-card">
                    <div class="user-avatar">
                        <img src="assets/img/yash.png" alt="User Avatar" class="avatar-img">
                        <div class="status-indicator online"></div>
                    </div>
                    <div class="user-info">
                        <div class="username" id="currentUser">Guest User</div>
                        <div class="user-status">Online</div>
                    </div>
                    <div class="user-actions">
                        <button class="action-btn" data-bs-toggle="tooltip" title="Change Status">
                            <i class="fas fa-circle"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="nav-tabs-container">
                <div class="nav-tabs-wrapper">
                    <button class="nav-tab active" data-tab="channels">
                        <i class="fas fa-hashtag"></i>
                        <span>Channels</span>
                    </button>
                    <button class="nav-tab" data-tab="direct">
                        <i class="fas fa-user-friends"></i>
                        <span>Direct Messages</span>
                    </button></a>
                </div>
            </div>

            <!-- Content Area -->
            <div class="sidebar-content">
                <!-- Channels Tab -->
                <div class="tab-content active" id="channels-tab">
                    <div class="section-header">
                        <span class="section-title">Public Channels</span>
                        <button class="section-action" data-bs-toggle="tooltip" title="Browse Channels">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    
                    <div class="channels-list" id="channelsList">
                        <div class="channel-item active" data-room="general" data-type="channel">
                            <div class="channel-icon">
                                <i class="fas fa-hashtag"></i>
                            </div>
                            <div class="channel-info">
                                <div class="channel-name">general</div>
                                <div class="channel-description">General discussions</div>
                            </div>
                            <div class="channel-meta">
                                <span class="unread-count">3</span>
                            </div>
                        </div>
                        
                        <div class="channel-item" data-room="tech-talk" data-type="channel">
                            <div class="channel-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <div class="channel-info">
                                <div class="channel-name">tech-talk</div>
                                <div class="channel-description">Technical discussions</div>
                            </div>
                        </div>
                        
                        <div class="channel-item" data-room="project-showcase" data-type="channel">
                            <div class="channel-icon">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <div class="channel-info">
                                <div class="channel-name">project-showcase</div>
                                <div class="channel-description">Show your projects</div>
                            </div>
                        </div>

                        <div class="channel-item" data-room="study-groups" data-type="channel">
                            <div class="channel-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="channel-info">
                                <div class="channel-name">study-groups</div>
                                <div class="channel-description">Form study groups</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Direct Messages Tab -->
                <div class="tab-content" id="direct-tab">
                    <div class="section-header">
                        <span class="section-title">Direct Messages</span>
                        <button class="section-action" data-bs-toggle="tooltip" title="Start New DM">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <div class="dm-list" id="dmList">
                        <!-- DM conversations will be populated here -->
                    </div>

                    <div class="section-header mt-4">
                        <span class="section-title">Online Users</span>
                        <span class="online-count" id="onlineCountSidebar">0</span>
                    </div>
                    
                    <div class="online-users-list" id="onlineUsersList">
                        <!-- Online users will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="exochat-main">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="chat-header-left">
                    <div class="channel-info-header">
                        <div class="channel-icon-header">
                            <i class="fas fa-hashtag" id="chatHeaderIcon"></i>
                        </div>
                        <div class="channel-details">
                            <h4 class="channel-name-header" id="currentRoomHeader">general</h4>
                            <p class="channel-description-header" id="channelDescription">General discussions and community chat</p>
                        </div>
                    </div>
                </div>
                
                <div class="chat-header-right">
                    <div class="chat-actions">
                        <button class="header-action-btn" data-bs-toggle="tooltip" title="Voice Call">
                            <i class="fas fa-phone"></i>
                        </button>
                        <button class="header-action-btn" data-bs-toggle="tooltip" title="Video Call">
                            <i class="fas fa-video"></i>
                        </button>
                        <button class="header-action-btn" data-bs-toggle="tooltip" title="Screen Share">
                            <i class="fas fa-desktop"></i>
                        </button>
                        <button class="header-action-btn" data-bs-toggle="tooltip" title="Search">
                            <i class="fas fa-search"></i>
                        </button>
                        <button class="header-action-btn" data-bs-toggle="tooltip" title="Members" id="toggleMembersBtn">
                            <i class="fas fa-users"></i>
                            <span class="member-count" id="memberCount">0</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Messages Container -->
            <div class="messages-area" id="messagesArea">
                <div class="messages-container" id="messagesContainer">
                    <!-- Messages will be populated here -->
                </div>
            </div>

            <!-- Message Input Area -->
            <div class="message-input-area">
                <div class="message-input-container">
                    <button class="input-action-btn" data-bs-toggle="tooltip" title="Attach File">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    
                    <div class="message-input-wrapper">
                        <form id="messageForm" class="message-form">
                            <div class="input-field-container">
                                <input 
                                    type="text" 
                                    class="message-input" 
                                    id="messageInput" 
                                    placeholder="Type a message..."
                                    autocomplete="off"
                                >
                                <button type="button" class="emoji-btn" data-bs-toggle="tooltip" title="Add Emoji">
                                    <i class="far fa-smile"></i>
                                </button>
                            </div>
                            <button type="submit" class="send-btn" id="sendButton">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </form>
                    </div>
                </div>
                
                <!-- Typing Indicator -->
                <div class="typing-indicator" id="typingIndicator" style="display: none;">
                    <div class="typing-text">
                        <span id="typingUsers"></span> is typing...
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Sidebar (Member List) -->
        <div class="exochat-members" id="membersPanel" style="display: none;">
            <div class="members-header">
                <h5 class="members-title">Members</h5>
                <button class="close-members-btn" id="closeMembersBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="members-content">
                <div class="members-section">
                    <div class="members-section-title">Online — <span id="onlineCount">0</span></div>
                    <div class="members-list" id="onlineMembers">
                        <!-- Online members will be populated here -->
                    </div>
                </div>
                
                <div class="members-section">
                    <div class="members-section-title">Offline — <span id="offlineCount">0</span></div>
                    <div class="members-list" id="offlineMembers">
                        <!-- Offline members will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div class="modal fade" id="welcomeModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Welcome to ExoChat</h5>
                </div>
                <div class="modal-body">
                    <div class="welcome-content">
                        <div class="welcome-header text-center mb-4">
                            <img src="../logo.png" alt="ExoVerce" class="welcome-logo mb-3" style="width: 80px;">
                            <h4>Join the ExoVerce Community</h4>
                            <p class="text-muted">Connect with learners, makers, and experts</p>
                        </div>
                        
                        <form id="welcomeForm">
                            <div class="mb-3">
                                <label for="usernameInput" class="form-label">Choose your username</label>
                                <input type="text" class="form-control" id="usernameInput" placeholder="Enter your username" required>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">Choose your avatar</label>
                                <div class="avatar-selection">
                                    <div class="row g-2">
                                        <div class="col-3">
                                            <input type="radio" class="btn-check" name="avatar" id="avatar1" value="assets/img/yash.png" checked>
                                            <label class="btn btn-outline-primary w-100 avatar-option" for="avatar1">
                                                <img src="assets/img/yash.png" alt="Avatar 1" class="avatar-preview">
                                            </label>
                                        </div>
                                        <div class="col-3">
                                            <input type="radio" class="btn-check" name="avatar" id="avatar2" value="https://via.placeholder.com/40x40/FF6B6B/FFFFFF?text=A">
                                            <label class="btn btn-outline-primary w-100 avatar-option" for="avatar2">
                                                <img src="https://via.placeholder.com/40x40/FF6B6B/FFFFFF?text=A" alt="Avatar 2" class="avatar-preview">
                                            </label>
                                        </div>
                                        <div class="col-3">
                                            <input type="radio" class="btn-check" name="avatar" id="avatar3" value="https://via.placeholder.com/40x40/4ECDC4/FFFFFF?text=B">
                                            <label class="btn btn-outline-primary w-100 avatar-option" for="avatar3">
                                                <img src="https://via.placeholder.com/40x40/4ECDC4/FFFFFF?text=B" alt="Avatar 3" class="avatar-preview">
                                            </label>
                                        </div>
                                        <div class="col-3">
                                            <input type="radio" class="btn-check" name="avatar" id="avatar4" value="https://via.placeholder.com/40x40/45B7D1/FFFFFF?text=C">
                                            <label class="btn btn-outline-primary w-100 avatar-option" for="avatar4">
                                                <img src="https://via.placeholder.com/40x40/45B7D1/FFFFFF?text=C" alt="Avatar 4" class="avatar-preview">
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-100" id="joinChatBtn">
                                <i class="fa-solid fa-comments me-2"></i>Join Chat
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Emoji Modal -->
    <div class="modal fade" id="emojiModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Select Emoji</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="emoji-grid" id="emojiGrid">
                        <!-- Emojis will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Socket.IO (for real implementation) -->
    <script>
        // Mock Socket.IO for demo
        const io = () => ({
            emit: (event, data) => console.log('Emit:', event, data),
            on: (event, callback) => console.log('Listen:', event)
        });
    </script>
    <script src="assets/js/app.js"></script>
</body>
</html>